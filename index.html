<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Upcoming Bookings</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f7f7f7;
            padding: 20px;
            color: #333;
        }

        h1 {
            font-size: 24px;
            margin-bottom: 20px;
        }

        #btn {
            display: inline-block;
            padding: 10px 20px;
            background-color: #f0c040;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 14px;
            margin-bottom: 20px;
        }

       /* Container for each booking */
.booking-card {
    display: flex;
    flex-direction: row;
    align-items: flex-start;
    border: 1px solid #ddd;
    border-radius: 8px;
    padding: 16px;
    margin: 16px 0;
    background-color: white;
}

/* Icon styling */
.booking-icon {
    width: 40px;
    height: 40px;
    margin-right: 16px;
}

/* Details styling */
.booking-details {
    flex: 1;
}

.booking-details h2 {
    font-size: 16px;
    font-weight: 500;
    margin: 0 0 8px;
}

.booking-details p {
    margin: 4px 0;
    font-size: 12px;
    color: gray;
}

/* Bold and darker style for values */
.booking-details .value {
    font-size: 14px;
    font-weight: 500;
    color: black;
}

/* Status alignment and style */
.status {
    display: flex;
    align-items: center;
    margin-left: auto;
}

.status img {
    width: 16px;
    height: 16px;
    margin-right: 4px;
}

.status span {
    color: green;
    font-weight: 500;
    font-size: 12px;
}

/* Flex container for the last line */
.flex-row {
    display: flex;
    justify-content: space-between;
    font-size: 12px;
    color: gray;
}

    </style>
</head>
<body>
    <h1>Upcoming Bookings</h1>
    <button id="btn">Load Bookings</button>
    <div id="app"></div>

    <script>
        function loadBryanBookings() {
            const url = "https://script.google.com/macros/s/AKfycbyzr9VlVCT2CzkquXtBMryGhxGZx6HOMzKDGO_6OLWleeY0fmSdXFz4nEHKFAz-vTCmpQ/exec";

            fetch(url)
                .then(response => response.json())
                .then(data => {
                    const bookings = data[0].data;
                    const appDiv = document.getElementById("app");
                    appDiv.innerHTML = "";

                    bookings.forEach(booking => {
                        // Create the card container
                        const card = document.createElement("div");
                        card.className = "booking-card";

                        // Icon container
                        const iconContainer = document.createElement("div");
                        iconContainer.className = "booking-icon";
                        const iconImage = document.createElement("img");
                        iconImage.src = "icon.png"; // Replace with your icon path
                        iconContainer.appendChild(iconImage);

                        // Details container
                        const detailsContainer = document.createElement("div");
                        detailsContainer.className = "booking-details";
                        detailsContainer.innerHTML = `
                            <h2>${booking.AmenityName}</h2>
                            <p>Booking date: <span>${formatDate(booking.BookingDate)}</span></p>
                            <p>Time slot: <span>${booking.TimeSlot}</span></p>
                            <p>Service Req Number: <span>${booking.ServiceRequestNumber}</span></p>
                            <div class="aligned-container">
                                <div>Service Req Raised Date:</div>
                                <div class="service-req-date"><span>${formatShortDate(booking.BookingDate)}</span></div>
                            </div>
                        `;

                        // Status container
                        const statusContainer = document.createElement("div");
                        statusContainer.className = "status";
                        const statusIcon = document.createElement("img");
                        statusIcon.src = "approvedIcon.png"; // Replace with your approved status icon path
                        statusContainer.appendChild(statusIcon);
                        const statusText = document.createElement("span");
                        statusText.textContent = "Approved";
                        statusText.style.color = "green";
                        statusContainer.appendChild(statusText);

                        // Three dots icon
                        const threeDots = document.createElement("div");
                        threeDots.className = "three-dots";

                        // Append all elements to the card
                        card.appendChild(iconContainer);
                        card.appendChild(statusContainer);
                        card.appendChild(detailsContainer);
                        card.appendChild(threeDots);

                        // Append the card to the main container
                        appDiv.appendChild(card);
                    });
                })
                .catch(error => {
                    console.error("Error loading bookings:", error);
                    document.getElementById("app").textContent = "Error loading bookings.";
                });
        }

        function formatDate(dateStr) {
            const date = new Date(dateStr);
            const options = { weekday: 'short', year: 'numeric', month: 'short', day: 'numeric' };
            return date.toLocaleDateString(undefined, options);
        }

        function formatShortDate(dateStr) {
            const date = new Date(dateStr);
            const options = { year: 'numeric', month: 'short', day: 'numeric' };
            return date.toLocaleDateString(undefined, options);
        }

        document.getElementById("btn").addEventListener("click", loadBryanBookings);
    </script>
</body>
</html>
